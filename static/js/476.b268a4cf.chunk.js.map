{"version":3,"file":"static/js/476.b268a4cf.chunk.js","mappings":"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","sources":["routes/AddDestinationMap.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { styled } from \"styled-components\";\nimport markerIcon from \"../assets/image/marker.png\";\nimport starIcon from \"../assets/image/starIcon.png\";\n\nconst AddDestinationMap = () => {\n  // const [myLocation, setMyLocation] = useState({});\n  const [top12List, setTop12List] = useState([]);\n  const [markerArr, setMarkerArr] = useState([]);\n  // const [placeInfo, setPlaceInfo] = useState({});\n  const { naver } = window;\n  const [map, setMap] = useState([]);\n  // const map = useRef({});\n  const markers = useRef([]);\n  const [zoomMap, setZoomMap] = useState([]);\n  const [regionSelect, setRegionSelect] = useState(\"지역 전체\");\n  const [didMount, setDidMount] = useState(false);\n\n  const send = (data) => {\n    window.ReactNativeWebView?.postMessage(JSON.stringify(data));\n  };\n\n  // const addrReplace = (place) => {\n  //   if (place !== undefined) {\n  //     const splitAddr = place.split(\" \");\n  //     const Addr = splitAddr.slice(0, 2).join(\" \");\n  //     return Addr;\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   const getData = async () => {\n  //     await axios({\n  //       method: \"post\",\n  //       url: `${process.env.REACT_APP_API_URL}/place/recommand`,\n  //       data: {\n  //         curPage: 1,\n  //       },\n  //     })\n  //       .then((res) => {\n  //         // console.log(res.data.dataList);\n  //         setTop12List(res.data.dataList);\n  //         const copyArr = [...res.data.dataList];\n  //         const result = copyArr.map((el) => {\n  //           return { lat: el.mapy, lng: el.mapx };\n  //         });\n  //         setMarkerArr(result);\n  //         console.log(result);\n  //         // send(res.data.dataList[0]);\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //       });\n  //   };\n  //   getData();\n  // }, []);\n\n  useEffect(() => {\n    send(\"didMount\");\n    //android\n    document.addEventListener(\"message\", (e) => {\n      const parseData = JSON.parse(e.data);\n      setTop12List(parseData.dataList);\n      const copyArr = [...parseData.dataList];\n      const result = copyArr.map((el) => {\n        return { lat: el.mapy, lng: el.mapx };\n      });\n      setMarkerArr(result);\n      // setPlaceInfo(parseData[0]);\n      setZoomMap(parseData?.region);\n      setRegionSelect(parseData?.regionSelect);\n    });\n    //ios\n    window.addEventListener(\"message\", (e) => {\n      const parseData = JSON.parse(e.data);\n      setTop12List(parseData.dataList);\n      const copyArr = [...parseData.dataList];\n      const result = copyArr.map((el) => {\n        return { lat: el.mapy, lng: el.mapx };\n      });\n      setMarkerArr(result);\n      // setPlaceInfo(parseData[0]);\n      setZoomMap(parseData?.region);\n      setRegionSelect(parseData?.regionSelect);\n    });\n  }, []);\n\n  // 주변마커 오버레이 클릭 이벤트 적용하기\n  useEffect(() => {\n    const firstMap = new naver.maps.Map(\"map\", {\n      center: new naver.maps.LatLng(36.5, 127.6),\n      zoomControl: false,\n      zoom: 6,\n    });\n    // map.current = firstMap;\n    setMap(firstMap);\n    setDidMount(true);\n    // // 주변 마커 나타내기\n    // const markers = [];\n    // // 반복문을 통해 찍어준다\n    // for (let i = 0; i < markerArr.length; i += 1) {\n    //   const otherMarkers = new naver.maps.Marker({\n    //     position: new naver.maps.LatLng(markerArr[i].lat, markerArr[i].lng),\n    //     map,\n    //     // 원하는 이미지로 마커 커스텀\n    //     icon: {\n    //       url: markerIcon,\n    //       size: new naver.maps.Size(50, 52),\n    //       scaledSize: new naver.maps.Size(50, 52),\n    //       origin: new naver.maps.Point(0, 0),\n    //       anchor: new naver.maps.Point(25, 26),\n    //     },\n    //   });\n\n    //   markers.push(otherMarkers);\n    // }\n\n    // const getClickHandler = (seq) => {\n    //   return () => {\n    //     const marker = markers[seq];\n    //     console.log(seq);\n    //     setPlaceInfo(top12List[seq]);\n    //     send();\n    //   };\n    // };\n\n    // for (let i = 0; i < markers.length; i += 1) {\n    //   naver.maps.Event.addListener(markers[i], \"click\", getClickHandler(i));\n    // }\n  }, []);\n  useEffect(() => {\n    // 주변 마커 나타내기\n    if (markers.current[0]) {\n      markers.current.forEach((e) => {\n        e.setMap(null);\n      });\n      // markerList 배열 초기화\n      markers.current.splice(0);\n    }\n    // const markers = [];\n    // 반복문을 통해 찍어준다\n    for (let i = 0; i < markerArr.length; i++) {\n      const otherMarkers = new naver.maps.Marker({\n        position: new naver.maps.LatLng(markerArr[i].lat, markerArr[i].lng),\n        map,\n        // 원하는 이미지로 마커 커스텀\n        icon: {\n          url: markerIcon,\n          size: new naver.maps.Size(50, 52),\n          scaledSize: new naver.maps.Size(50, 52),\n          origin: new naver.maps.Point(0, 0),\n          anchor: new naver.maps.Point(25, 26),\n        },\n      });\n\n      markers.current.push(otherMarkers);\n\n      // naver.maps.Event.addListener(map, \"idle\", () => {\n      //   updateMarkers(map, markers);\n      // });\n      // const updateMarkers = (isMap, isMarkers) => {\n      //   const mapBounds = isMap.getBounds();\n      //   let marker;\n      //   let position;\n\n      //   for (let i = 0; i < isMarkers.length; i += 1) {\n      //     marker = isMarkers[i];\n      //     position = marker.getPosition();\n\n      //     if (mapBounds.hasLatLng(position)) {\n      //       showMarker(isMap, marker);\n      //     } else {\n      //       hideMarker(marker);\n      //     }\n      //   }\n      // };\n\n      // const showMarker = (isMap, marker) => {\n      //   marker.setMap(isMap);\n      // };\n\n      // const hideMarker = (marker) => {\n      //   marker.setMap(null);\n      // };\n      // for (let i = 0, len = markers.length; i < len; i++) {\n      //   markers[i].setMap(null);\n      // }\n    }\n\n    const getClickHandler = (seq) => {\n      return () => {\n        // const marker = markers[seq];\n        const sendData = {\n          placeInfo: top12List[seq],\n          index: seq,\n        };\n        // setPlaceInfo(top12List[seq]);\n        send(sendData);\n      };\n    };\n\n    for (let i = 0; i < markers.current.length; i += 1) {\n      naver.maps.Event.addListener(markers.current[i], \"click\", getClickHandler(i));\n    }\n\n    if (regionSelect) {\n      if (regionSelect !== \"지역 전체\") {\n        const selectLocation = zoomMap.filter((el) => {\n          return el.region === regionSelect;\n        });\n        let moveLocation = new naver.maps.LatLng(selectLocation[0]?.mapy, selectLocation[0]?.mapx);\n        // map.panTo(moveLocation);\n        // map.setOptions(\"zoom\", 8);\n        map.morph(moveLocation, 8);\n        // alert(moveLocation);\n      } else {\n        if (didMount) {\n          let allRegion = new naver.maps.LatLng(36.5, 127.6);\n          // map.panTo(allRegion);\n          // map.setOptions(\"zoom\", 7);\n          map.morph(allRegion, 6);\n          // alert(allRegion);\n        }\n      }\n    } else {\n      let moveLocation = new naver.maps.LatLng(top12List[0]?.mapy, top12List[0]?.mapx);\n      map.morph(moveLocation, 11);\n      // alert(moveLocation);\n    }\n  }, [top12List]);\n  return (\n    <Container>\n      <div id=\"map\" style={{ width: \"100%\", display: \"flex\", flex: 1 }} />\n      {/* <InfoContainer>\n        <InfoImg src={placeInfo.firstimage2} />\n        <InfoTextContainer>\n          <InfoTextTop>\n            <TitleArea>\n              {placeInfo.title}\n              <StarIcon src={starIcon} />5\n            </TitleArea>\n            <CategoryArea>{placeInfo.describe}</CategoryArea>\n          </InfoTextTop>\n          <InfoTextBottom>\n            <BottomLeft>{addrReplace(placeInfo.addr1)}</BottomLeft>\n            <AddBtn>등록</AddBtn>\n          </InfoTextBottom>\n        </InfoTextContainer>\n      </InfoContainer> */}\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  flex-direction: column;\n`;\nconst MapContainer = styled.div`\n  width: 100%;\n  display: flex;\n  flex: 1;\n`;\nconst InfoContainer = styled.div`\n  display: flex;\n  width: 100%;\n  height: 120px;\n  padding: 10px 20px;\n  flex-direction: row;\n  background-color: #fff;\n  border-top: 1px solid #d9d9d9;\n`;\nconst InfoImg = styled.img`\n  width: 100px;\n  height: 100px;\n  border-radius: 8px;\n  margin-right: 10px;\n`;\nconst InfoTextContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst InfoTextTop = styled.div`\n  display: flex;\n  width: 100%;\n  height: 45px;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst InfoTextBottom = styled.div`\n  display: flex;\n  width: 100%;\n  height: 42px;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst TitleArea = styled.div`\n  display: flex;\n  height: 26px;\n  flex: 1;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 26.06px;\n  color: #000;\n  align-items: center;\n`;\nconst CategoryArea = styled.div`\n  display: flex;\n  font-size: 12px;\n  font-weight: 300;\n  line-height: 17.38px;\n  color: #25b1fa;\n`;\nconst StarIcon = styled.img`\n  width: 18px;\n  height: 18px;\n  margin-left: 10px;\n  margin-right: 6px;\n`;\nconst BottomLeft = styled.div`\n  display: flex;\n  flex: 1;\n`;\nconst AddBtn = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 55px;\n  height: 30px;\n  border: 1px solid #25b1fa;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 17.38px;\n  color: #25b1fa;\n  cursor: pointer;\n`;\n\nexport default AddDestinationMap;\n"],"names":["Container","styled","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","img","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","_useState","useState","_useState2","_slicedToArray","top12List","setTop12List","_useState3","_useState4","markerArr","setMarkerArr","naver","window","_useState5","_useState6","map","setMap","markers","useRef","_useState7","_useState8","zoomMap","setZoomMap","_useState9","_useState10","regionSelect","setRegionSelect","_useState11","_useState12","didMount","setDidMount","send","data","_window$ReactNativeWe","ReactNativeWebView","postMessage","JSON","stringify","useEffect","document","addEventListener","e","parseData","parse","dataList","result","_toConsumableArray","el","lat","mapy","lng","mapx","region","firstMap","maps","Map","center","LatLng","zoomControl","zoom","current","forEach","splice","i","length","otherMarkers","Marker","position","icon","url","markerIcon","size","Size","scaledSize","origin","Point","anchor","push","getClickHandler","seq","sendData","placeInfo","index","Event","addListener","_selectLocation$","_selectLocation$2","selectLocation","filter","moveLocation","morph","allRegion","_top12List$","_top12List$2","_jsx","children","id","style","width","display","flex"],"sourceRoot":""}