{"version":3,"file":"static/js/496.a23f05cf.chunk.js","mappings":"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","sources":["routes/AddDestinationMap.jsx"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { styled } from \"styled-components\";\nimport markerIcon from \"../assets/image/marker.png\";\nimport starIcon from \"../assets/image/starIcon.png\";\n\nconst AddDestinationMap = () => {\n  // const [myLocation, setMyLocation] = useState({});\n  const [top12List, setTop12List] = useState([]);\n  const [markerArr, setMarkerArr] = useState([]);\n  // const [placeInfo, setPlaceInfo] = useState({});\n  const { naver } = window;\n  const [map, setMap] = useState([]);\n  // const map = useRef({});\n  const markers = useRef([]);\n  const [zoomMap, setZoomMap] = useState([]);\n  const [regionSelect, setRegionSelect] = useState(\"전국\");\n  const [didMount, setDidMount] = useState(false);\n  const regionZoomArr = [\"경기\", \"경북\", \"강원\", \"충남\", \"경남\", \"전남\", \"충북\", \"전북\"];\n  const [moveCamera, setMoveCamera] = useState(false);\n  const curRegion = useRef(\"전국\");\n  // alert(regionSelect);\n\n  const send = (data) => {\n    window.ReactNativeWebView?.postMessage(JSON.stringify(data));\n  };\n\n  // const addrReplace = (place) => {\n  //   if (place !== undefined) {\n  //     const splitAddr = place.split(\" \");\n  //     const Addr = splitAddr.slice(0, 2).join(\" \");\n  //     return Addr;\n  //   }\n  // };\n\n  // useEffect(() => {\n  //   const getData = async () => {\n  //     await axios({\n  //       method: \"post\",\n  //       url: `${process.env.REACT_APP_API_URL}/place/recommand`,\n  //       data: {\n  //         curPage: 1,\n  //       },\n  //     })\n  //       .then((res) => {\n  //         // console.log(res.data.dataList);\n  //         setTop12List(res.data.dataList);\n  //         const copyArr = [...res.data.dataList];\n  //         const result = copyArr.map((el) => {\n  //           return { lat: el.mapy, lng: el.mapx };\n  //         });\n  //         setMarkerArr(result);\n  //         console.log(result);\n  //         // send(res.data.dataList[0]);\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //       });\n  //   };\n  //   getData();\n  // }, []);\n\n  useEffect(() => {\n    send(\"didMount\");\n    //android\n    document.addEventListener(\"message\", (e) => {\n      const parseData = JSON.parse(e.data);\n      setTop12List(parseData?.dataList);\n      const copyArr = [...parseData?.dataList];\n      const result = copyArr.map((el) => {\n        return { lat: el.mapy, lng: el.mapx };\n      });\n      setMarkerArr(result);\n      // setPlaceInfo(parseData[0]);\n      setZoomMap(parseData?.region);\n      setRegionSelect(parseData?.regionSelect);\n      if (parseData?.regionSelect !== curRegion.current) {\n        curRegion.current = parseData?.regionSelect;\n        setMoveCamera(true);\n      } else {\n        setMoveCamera(false);\n      }\n    });\n    //ios\n    window.addEventListener(\"message\", (e) => {\n      const parseData = JSON.parse(e.data);\n      setTop12List(parseData?.dataList);\n      const copyArr = [...parseData?.dataList];\n      const result = copyArr.map((el) => {\n        return { lat: el.mapy, lng: el.mapx };\n      });\n      setMarkerArr(result);\n      // setPlaceInfo(parseData[0]);\n      setZoomMap(parseData?.region);\n      setRegionSelect(parseData?.regionSelect);\n      if (parseData?.regionSelect !== curRegion.current) {\n        curRegion.current = parseData?.regionSelect;\n        setMoveCamera(true);\n      } else {\n        setMoveCamera(false);\n      }\n    });\n  }, []);\n  // alert(moveCamera);\n\n  // 주변마커 오버레이 클릭 이벤트 적용하기\n  useEffect(() => {\n    const firstMap = new naver.maps.Map(\"map\", {\n      center: new naver.maps.LatLng(36.5, 127.6),\n      zoomControl: false,\n      zoom: 6,\n    });\n    // map.current = firstMap;\n    setMap(firstMap);\n    setDidMount(true);\n    // // 주변 마커 나타내기\n    // const markers = [];\n    // // 반복문을 통해 찍어준다\n    // for (let i = 0; i < markerArr.length; i += 1) {\n    //   const otherMarkers = new naver.maps.Marker({\n    //     position: new naver.maps.LatLng(markerArr[i].lat, markerArr[i].lng),\n    //     map,\n    //     // 원하는 이미지로 마커 커스텀\n    //     icon: {\n    //       url: markerIcon,\n    //       size: new naver.maps.Size(50, 52),\n    //       scaledSize: new naver.maps.Size(50, 52),\n    //       origin: new naver.maps.Point(0, 0),\n    //       anchor: new naver.maps.Point(25, 26),\n    //     },\n    //   });\n\n    //   markers.push(otherMarkers);\n    // }\n\n    // const getClickHandler = (seq) => {\n    //   return () => {\n    //     const marker = markers[seq];\n    //     console.log(seq);\n    //     setPlaceInfo(top12List[seq]);\n    //     send();\n    //   };\n    // };\n\n    // for (let i = 0; i < markers.length; i += 1) {\n    //   naver.maps.Event.addListener(markers[i], \"click\", getClickHandler(i));\n    // }\n  }, []);\n  useEffect(() => {\n    // 주변 마커 나타내기\n    if (markers.current[0]) {\n      markers.current.forEach((e) => {\n        e.setMap(null);\n      });\n      // markerList 배열 초기화\n      markers.current.splice(0);\n    }\n    // const markers = [];\n    // 반복문을 통해 찍어준다\n    for (let i = 0; i < markerArr.length; i++) {\n      const otherMarkers = new naver.maps.Marker({\n        position: new naver.maps.LatLng(markerArr[i].lat, markerArr[i].lng),\n        map,\n        // 원하는 이미지로 마커 커스텀\n        icon: {\n          url: markerIcon,\n          size: new naver.maps.Size(50, 52),\n          scaledSize: new naver.maps.Size(50, 52),\n          origin: new naver.maps.Point(0, 0),\n          anchor: new naver.maps.Point(25, 26),\n        },\n      });\n\n      markers.current.push(otherMarkers);\n\n      // naver.maps.Event.addListener(map, \"idle\", () => {\n      //   updateMarkers(map, markers);\n      // });\n      // const updateMarkers = (isMap, isMarkers) => {\n      //   const mapBounds = isMap.getBounds();\n      //   let marker;\n      //   let position;\n\n      //   for (let i = 0; i < isMarkers.length; i += 1) {\n      //     marker = isMarkers[i];\n      //     position = marker.getPosition();\n\n      //     if (mapBounds.hasLatLng(position)) {\n      //       showMarker(isMap, marker);\n      //     } else {\n      //       hideMarker(marker);\n      //     }\n      //   }\n      // };\n\n      // const showMarker = (isMap, marker) => {\n      //   marker.setMap(isMap);\n      // };\n\n      // const hideMarker = (marker) => {\n      //   marker.setMap(null);\n      // };\n      // for (let i = 0, len = markers.length; i < len; i++) {\n      //   markers[i].setMap(null);\n      // }\n    }\n\n    const getClickHandler = (seq) => {\n      return () => {\n        // const marker = markers[seq];\n        const sendData = {\n          placeInfo: top12List[seq],\n          index: seq,\n        };\n        // setPlaceInfo(top12List[seq]);\n        send(sendData);\n      };\n    };\n\n    for (let i = 0; i < markers.current.length; i += 1) {\n      naver.maps.Event.addListener(markers.current[i], \"click\", getClickHandler(i));\n    }\n\n    if (regionSelect) {\n      if (moveCamera) {\n        if (regionSelect !== \"전국\") {\n          const selectLocation = zoomMap.filter((el) => {\n            return el.region === regionSelect;\n          });\n          let moveLocation = new naver.maps.LatLng(\n            selectLocation[0]?.mapy,\n            selectLocation[0]?.mapx\n          );\n          //전북,전남,강원 등등 넓은지역 줌 설정\n          if (regionZoomArr.includes(regionSelect)) {\n            map.morph(moveLocation, 8);\n          } else if (regionSelect === \"제주\") {\n            map.morph(moveLocation, 11);\n          } else if (regionSelect === \"세종\") {\n            map.morph(moveLocation, 12);\n          } else {\n            map.morph(moveLocation, 11);\n          }\n          // alert(\"지역선택됌\");\n        } else {\n          if (didMount) {\n            let allRegion = new naver.maps.LatLng(36.5, 127.6);\n            map.morph(allRegion, 6);\n            // alert(\"전체\");\n          }\n        }\n      }\n    } else {\n      let moveLocation = new naver.maps.LatLng(top12List[0]?.mapy, top12List[0]?.mapx);\n      map.morph(moveLocation, 12);\n      // alert(moveLocation);\n    }\n  }, [top12List]);\n  return (\n    <Container>\n      <div id=\"map\" style={{ width: \"100%\", display: \"flex\", flex: 1 }} />\n      {/* <InfoContainer>\n        <InfoImg src={placeInfo.firstimage2} />\n        <InfoTextContainer>\n          <InfoTextTop>\n            <TitleArea>\n              {placeInfo.title}\n              <StarIcon src={starIcon} />5\n            </TitleArea>\n            <CategoryArea>{placeInfo.describe}</CategoryArea>\n          </InfoTextTop>\n          <InfoTextBottom>\n            <BottomLeft>{addrReplace(placeInfo.addr1)}</BottomLeft>\n            <AddBtn>등록</AddBtn>\n          </InfoTextBottom>\n        </InfoTextContainer>\n      </InfoContainer> */}\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  flex-direction: column;\n`;\nconst MapContainer = styled.div`\n  width: 100%;\n  display: flex;\n  flex: 1;\n`;\nconst InfoContainer = styled.div`\n  display: flex;\n  width: 100%;\n  height: 120px;\n  padding: 10px 20px;\n  flex-direction: row;\n  background-color: #fff;\n  border-top: 1px solid #d9d9d9;\n`;\nconst InfoImg = styled.img`\n  width: 100px;\n  height: 100px;\n  border-radius: 8px;\n  margin-right: 10px;\n`;\nconst InfoTextContainer = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst InfoTextTop = styled.div`\n  display: flex;\n  width: 100%;\n  height: 45px;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst InfoTextBottom = styled.div`\n  display: flex;\n  width: 100%;\n  height: 42px;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\nconst TitleArea = styled.div`\n  display: flex;\n  height: 26px;\n  flex: 1;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 26.06px;\n  color: #000;\n  align-items: center;\n`;\nconst CategoryArea = styled.div`\n  display: flex;\n  font-size: 12px;\n  font-weight: 300;\n  line-height: 17.38px;\n  color: #25b1fa;\n`;\nconst StarIcon = styled.img`\n  width: 18px;\n  height: 18px;\n  margin-left: 10px;\n  margin-right: 6px;\n`;\nconst BottomLeft = styled.div`\n  display: flex;\n  flex: 1;\n`;\nconst AddBtn = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 55px;\n  height: 30px;\n  border: 1px solid #25b1fa;\n  border-radius: 8px;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 17.38px;\n  color: #25b1fa;\n  cursor: pointer;\n`;\n\nexport default AddDestinationMap;\n"],"names":["Container","styled","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","img","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","AddDestinationMap","top12List","setTop12List","useState","markerArr","setMarkerArr","naver","window","map","setMap","markers","useRef","zoomMap","setZoomMap","regionSelect","setRegionSelect","didMount","setDidMount","regionZoomArr","moveCamera","setMoveCamera","curRegion","send","data","_window$ReactNativeWe","ReactNativeWebView","postMessage","JSON","stringify","useEffect","document","addEventListener","e","parseData","parse","dataList","result","el","lat","mapy","lng","mapx","region","current","firstMap","maps","Map","center","LatLng","zoomControl","zoom","forEach","splice","i","length","otherMarkers","Marker","position","icon","url","markerIcon","size","Size","scaledSize","origin","Point","anchor","push","getClickHandler","seq","sendData","placeInfo","index","Event","addListener","_selectLocation$","_selectLocation$2","selectLocation","filter","moveLocation","includes","morph","allRegion","_top12List$","_top12List$2","_jsx","children","id","style","width","display","flex"],"sourceRoot":""}